/*! For license information please see main.f2e3e417.chunk.js.LICENSE.txt */
(this["webpackJsonp@drill4j/vee-ui"]=this["webpackJsonp@drill4j/vee-ui"]||[]).push([[0],{139:function(e,t,n){"use strict";n.r(t);var r,o=n(1),i=n.n(o),a=n(25),s=n.n(a),c=(n(75),n(76),n(7)),u=n(4),l=n(8),d=n(2),f=n.n(d),p=n(5),h={};function b(e,t){var n=new r;n.open("GET",e,!0),n.onreadystatechange=function(){4==this.readyState&&(this.status>=200&&this.status<300||304===this.status?t(null,JSON.parse(this.responseText)):t({request:this,error:this.status}))},n.send()}h.isConnected=function(){return""!==h.getCookie("github_access_token")},h.connect=function(){window.location.href="https://github.com/login/oauth/authorize?client_id="+h.config.client_id+"&scope="+h.config.scope},h.disconnect=function(){h.deleteCookies(["github_access_token"]),window.location.reload()},h.toggle=function(){h.isConnected()?h.disconnect():h.connect()},h.withCredentials=function(e){var t=h.getCookie("github_access_token");if(!t)return e("User is not authorized...");b("https://api.github.com/user?access_token="+t,(function(n,r){return null===n?e(null,r.login,t,r):e(n)}))},h.parseUrl=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#/]*)").exec(window.location.href);return null===t?null:t[1]},h.setCookie=function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);n="expires="+r.toGMTString();document.cookie=e+"="+t+"; "+n},h.getCookie=function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].trim();if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""},h.deleteCookies=function(e){for(var t=0;t<e.length;++t)document.cookie=e[t]+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"};var m,j=n(61),v=Object({NODE_ENV:"production",PUBLIC_URL:"/vee-table",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_OAUTH_APP_CLIENT_ID:"bd94ae2d0aac78ee7a20",REACT_APP_GITHUB_OAUTH_APP_PROXY:"https://versionion-test-git-proxy.herokuapp.com",REACT_APP_GITHUB_OAUTH_APP_SCOPES:"repo,user",REACT_APP_LEDGER_REPO_NAME:"vee-ledger",REACT_APP_LEDGER_REPO_OWNER:"Drill4J",REACT_APP_LEDGER_REPO_URL:"https://github.com/Drill4J/vee-ledger"}),g=function(e){if(!arguments.length)return h;for(var t in h.config={scope:"public_repo",expires:7},e)h.config[t]=e[t];"undefined"!==typeof window&&"undefined"!==typeof window.XMLHttpRequest&&(r=window.XMLHttpRequest);var n=h.parseUrl("code");return n&&b(h.config.proxy+"/github_access_token?code="+n+"&client_id="+h.config.client_id,(function(e,t){e?console.log(e):t.error?console.error("Github Authentication Error",t.error,t.error_description,t.error_uri):(h.setCookie("github_access_token",t.access_token,h.config.expires),window.location.href=window.location.href.replace(/[\\?&]code=[^&#]*/,""))})),h.isConnected()?document.dispatchEvent(new CustomEvent("IsConnectedToGithubEvent",{detail:h})):document.dispatchEvent(new CustomEvent("IsDisconnectedFromGithubEvent",{detail:h})),h}({client_id:v.REACT_APP_GITHUB_OAUTH_APP_CLIENT_ID,proxy:v.REACT_APP_GITHUB_OAUTH_APP_PROXY,scope:v.REACT_APP_GITHUB_OAUTH_APP_SCOPES});function O(){return(O=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.isConnected()){e.next=2;break}return e.abrupt("return",!1);case 2:if(!m){e.next=4;break}return e.abrupt("return",m);case 4:return console.log("CREATE NEW LEDGER INSTANCE"),t=g.getCookie("github_access_token"),m=new j.Ledger({octokitAuthToken:t,ledgerRepo:{url:String("https://github.com/Drill4J/vee-ledger"),owner:String("Drill4J"),name:String("vee-ledger")}}),e.abrupt("return",m);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x={getLedgerInstance:function(){return O.apply(this,arguments)},connect:function(){g.isConnected()||g.connect()},disconnect:function(){g.isConnected()&&g.disconnect()},isConnected:function(){return g.isConnected()},getAuthToken:function(){return g.getCookie("github_access_token")}},w=x,y=function(){var e=Object(o.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(),a=Object(u.a)(i,2),s=a[0],c=a[1],l=Object(o.useState)(!1),d=Object(u.a)(l,2),h=d[0],b=d[1];return Object(o.useEffect)((function(){Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,w.getLedgerInstance();case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,t.connected();case 9:r(t.data),c(t),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:return e.prev=16,b(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})))()}),[]),{data:n,ledger:s,isLoading:h}},E=n(0);function k(e){return e.children?Object(E.jsx)("div",{children:e.children}):Object(E.jsx)("div",{children:"..."})}var S=function(){var e=Object(o.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(!1),a=Object(u.a)(i,2),s=a[0],c=a[1];return Object(o.useEffect)((function(){Object(p.a)(f.a.mark((function e(){var t,n,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,w.getLedgerInstance();case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,t.getOctokitInstance();case 9:return e.next=11,e.sent.request("GET /user");case 11:if(200===(n=e.sent).status){e.next=16;break}throw o="ERROR: Failed to obtain user data. Open development console, copy error log and contact the development team",console.error(o,"\n","response",n,"---ERROR LOG END---"),new Error(o);case 16:r(n.data),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:return e.prev=22,c(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,19,22,25]])})))()}),[]),{data:n,isLoading:s}},_=function(){var e=S(),t=e.isLoading,n=e.data;return t?Object(E.jsx)(k,{children:" waiting to receive user data... "}):n?Object(E.jsxs)("div",{style:{display:"flex",marginRight:"15px"},children:[Object(E.jsx)("span",{children:"Hi there"}),Object(E.jsxs)("a",{className:"github-user-link",href:null===n||void 0===n?void 0:n.html_url,children:[Object(E.jsx)("img",{style:{margin:"0 7px"},alt:"user-avatar",className:"avatar",src:n.avatar_url}),Object(E.jsx)("span",{children:null===n||void 0===n?void 0:n.login}),Object(E.jsx)("span",{children:"!"})]})]}):Object(E.jsx)("div",{children:"you are not authenticated"})},C=function(e){return Object(E.jsxs)("div",{style:{position:"relative"},children:[Object(E.jsx)("div",{style:{position:"absolute",display:"flex",alignItems:"center",alignContent:"center",height:"calc(100vh - 39px)",width:"100%"},children:Object(E.jsxs)("h2",{style:{flex:"1",textAlign:"center"},children:["You cannot see anything yet ",Object(E.jsx)("br",{}),"because ",Object(E.jsx)("br",{})," you must"," ",Object(E.jsx)("span",{style:{color:"white",textDecoration:"underline",cursor:"pointer"},onClick:function(t){t.preventDefault(),e.authenticate()},children:"Authenticate"})]})}),Object(E.jsx)("img",{alt:"placeholder",style:{width:"100%",height:"calc(100vh - 39px)"},src:"https://img5.goodfon.ru/original/1920x1080/c/cb/sea-bird-grey-ocean.jpg"})]})},A=n(3),T=function(e){return Object(E.jsx)(A.d,{initialValues:{id:"",name:""},onSubmit:function(){var t=Object(p.a)(f.a.mark((function t(n,r){var o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.setSubmitting,t.prev=1,t.next=4,e.ledger.addComponent(n);case 4:window.location.reload(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),alert("Action failed: "+(null===t.t0||void 0===t.t0?void 0:t.t0.message)||!1);case 10:return t.prev=10,o(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,7,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(E.jsxs)(A.c,{children:[Object(E.jsx)("label",{htmlFor:"add-component-field-id",children:"Unique id"}),Object(E.jsx)(A.b,{id:"add-component-field-id",type:"text",name:"id",placeholder:"unique-dash-lower-case-id"}),Object(E.jsx)(A.a,{name:"id",component:"div"}),Object(E.jsx)("label",{htmlFor:"add-component-field-name",children:"Human-readable name"}),Object(E.jsx)(A.b,{id:"add-component-field-name",type:"text",name:"name",placeholder:"My Awesome Component"}),Object(E.jsx)(A.a,{name:"name",component:"div"}),Object(E.jsx)("button",{type:"submit",disabled:t,children:"Submit"}),t&&Object(E.jsx)("div",{children:"submitting..."})]})}})},P=n(21),I=n(27),R=n(6),N=n(11);function L(e){var t=new RegExp("^".concat(e));return function(e){return e.replace(t,"")}}function B(e){return function(t){return 0===t.indexOf(e)}}var U=function(e,t){return function(n){return Object.entries(n).map((function(n){var r,o=Object(u.a)(n,2),i=o[0],a=o[1];return r={},Object(N.a)(r,e,i),Object(N.a)(r,t,a),r}))}},D=function(e,t){return function(n){return n.reduce((function(n,r){return Object(R.a)(Object(R.a)({},n),{},Object(N.a)({},r[e],r[t]))}),{})}},F=function(e){return Array.from(new Set(Object.values(e).reduce((function(e,t){var n=t.componentIds;return[].concat(Object(I.a)(e),Object(I.a)(n))}),[])))},V=["id","name"],M=function(e){return Array.isArray(e.data.components)&&0!==e.data.components.length?Object(E.jsx)(A.d,{initialValues:{id:"",name:""},onSubmit:function(){var t=Object(p.a)(f.a.mark((function t(n,r){var o,i,a,s,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.setSubmitting,t.prev=1,i=n.id,a=n.name,s=Object(P.a)(n,V),c=Object.keys(s).filter(B("component-")).map(L("component-")),t.next=6,e.ledger.addSetup({id:i,name:a,componentIds:c});case 6:window.location.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),alert("Action failed: "+(null===t.t0||void 0===t.t0?void 0:t.t0.message)||!1);case 12:return t.prev=12,o(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(t){var n=t.isSubmitting;return Object(E.jsxs)(A.c,{children:[Object(E.jsx)("label",{htmlFor:"add-component-field-id",children:"Unique id"}),Object(E.jsx)(A.b,{id:"add-component-field-id",type:"text",name:"id",placeholder:"unique-dash-lower-case-id"}),Object(E.jsx)(A.a,{name:"id",component:"div"}),Object(E.jsx)("label",{htmlFor:"add-setup-field-name",children:"Human-readable name"}),Object(E.jsx)(A.b,{id:"add-setup-field-name",type:"text",name:"name",placeholder:"My Awesome Setup"}),Object(E.jsx)(A.a,{name:"name",component:"div"}),Object(E.jsx)("label",{htmlFor:"id",children:"Select components"}),e.data.components.map((function(e){return Object(E.jsxs)("div",{children:[Object(E.jsx)(A.b,{id:"add-setup-field-".concat(e.id),type:"checkbox",name:"component-".concat(e.id)}),Object(E.jsx)("label",{style:{paddingLeft:"7px"},htmlFor:"add-setup-field-".concat(e.id),children:e.name})]},e.id)})),Object(E.jsx)("button",{type:"submit",disabled:n,children:"Submit"}),n&&Object(E.jsx)("div",{children:"submitting..."})]})}}):Object(E.jsx)(k,{children:"No available components. Create components first"})},H=n(69),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null};return function(t){var n=t.options,r=t.field,o=t.form;return Object(E.jsx)(H.a,{options:n,name:r.name,className:"select-field",value:n?n.find((function(e){return e.value===r.value})):"",onChange:function(t){o.setFieldValue(r.name,t.value),e(t.value,o)},onBlur:r.onBlur})}},G="SemVer, e.g. x.y.z",z=function(e){if(!Array.isArray(e.data.components)||0===e.data.components.length)return Object(E.jsx)(k,{children:"No available components. Create components first"});var t=e.data.components.map((function(e){return{value:e.id,label:e.name}})),n=Object(o.useState)(G),r=Object(u.a)(n,2),i=r[0],a=r[1];return Object(E.jsx)(A.d,{initialValues:{componentId:"",tag:"",date:""},onSubmit:function(){var t=Object(p.a)(f.a.mark((function t(n,r){var o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.setSubmitting,t.prev=1,t.next=4,e.ledger.addVersion({componentId:n.componentId,tag:n.tag});case 4:window.location.reload(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),alert("Action failed: "+(null===t.t0||void 0===t.t0?void 0:t.t0.message)||!1);case 10:return t.prev=10,o(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,7,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var n=e.isSubmitting;return Object(E.jsxs)(A.c,{children:[Object(E.jsx)("label",{htmlFor:"add-version-field-component-id",children:"Component"}),Object(E.jsx)(A.b,{id:"add-version-field-component-id",name:"componentId",component:Y(function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getLedgerInstance();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n.getLatestVersion(t);case 7:if(r=e.sent){e.next=11;break}return a(G),e.abrupt("return");case 11:a("latest is ".concat(r.tag));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),options:t}),Object(E.jsx)(A.a,{name:"componentId",component:"div"}),Object(E.jsx)("label",{htmlFor:"add-version-field-tag",children:"Version Tag"}),Object(E.jsx)(A.b,{id:"add-component-field-tag",type:"text",name:"tag",placeholder:i}),Object(E.jsx)(A.a,{name:"tag",component:"div"}),Object(E.jsx)("button",{type:"submit",disabled:n,children:"Submit"}),n&&Object(E.jsx)("div",{children:"submitting..."})]})}})};function J(e){return e.children?Object(E.jsx)("div",{children:e.children}):Object(E.jsx)("div",{children:"..."})}var q=["setupId","status","description"],W=function(e){if(!Array.isArray(e.data.setups)||0===e.data.setups.length)return Object(E.jsx)(k,{children:"No available setups. Create setups first"});var t=e.data.setups.map((function(e){return{value:e.id,label:e.name}})),n=Object(o.useState)([]),r=Object(u.a)(n,2),i=r[0],a=r[1],s=S().data;return Object(E.jsx)(A.d,{initialValues:{setupId:"",status:"",description:"",componentVersionMap:{}},onSubmit:function(){var t=Object(p.a)(f.a.mark((function t(n,r){var o,i,a,c,l,d;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.setupId,i=n.status,a=n.description,c=Object(P.a)(n,q),l=r.setSubmitting,t.prev=2,d=Object.entries(c).filter((function(e){var t=Object(u.a)(e,1)[0];return B("component-")(t)})).reduce((function(e,t){var n=Object(u.a)(t,2),r=n[0],o=n[1];return e[L("component-")(r)]=o,e}),{}),t.next=6,e.ledger.addTest({setupId:o,status:i,componentVersionMap:d,description:a,initiator:{userName:null===s||void 0===s?void 0:s.name,reason:"User launched test"}});case 6:window.location.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),alert("Action failed: "+(null===t.t0||void 0===t.t0?void 0:t.t0.message)||!1);case 12:return t.prev=12,l(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(n){var r=n.isSubmitting;return Object(E.jsxs)(A.c,{children:[Object(E.jsx)("label",{htmlFor:"add-test-field-setup-id",children:"Setup"}),Object(E.jsx)(A.b,{id:"add-test-field-setup-id",name:"setupId",component:Y(function(){var t=Object(p.a)(f.a.mark((function t(n,r){var o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ledger.getSetupComponents(n);case 2:o=t.sent,a(o),r.resetForm({values:{setupId:n,status:r.values.status,description:r.values.description,componentVersionMap:{}}});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),options:t}),Object(E.jsx)(A.a,{name:"setupId",component:"div"}),Object(E.jsx)("label",{htmlFor:"add-test-field-status",children:"Status"}),Object(E.jsx)(A.b,{id:"add-component-field-status",type:"text",name:"status",placeholder:"anything (passed, failed?)"}),Object(E.jsx)(A.a,{name:"status",component:"div"}),Object(E.jsx)("label",{htmlFor:"add-test-field-description",children:"Description (optional)"}),Object(E.jsx)(A.b,{id:"add-component-field-description",type:"text",name:"description",placeholder:"something informative"}),Object(E.jsx)(A.a,{name:"description",component:"div"}),Object(E.jsx)("label",{htmlFor:"add-test-field-status",children:"Component Versions"}),Object(E.jsx)(X,{components:i,ledger:e.ledger}),Object(E.jsx)("button",{type:"submit",disabled:r,children:"Submit"}),r&&Object(E.jsx)("div",{children:"submitting..."})]})}})};function X(e){var t=e.components,n=function(e,t){var n=Object(o.useState)({}),r=Object(u.a)(n,2),i=r[0],a=r[1],s=Object(o.useState)(!0),c=Object(u.a)(s,2),l=c[0],d=c[1],h=Object(o.useState)(""),b=Object(u.a)(h,2),m=b[0],j=b[1];return Object(o.useEffect)((function(){Object(p.a)(f.a.mark((function n(){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!0),n.prev=1,n.next=4,t.getComponentsVersions(e);case 4:r=n.sent,a(r),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),j("Failed to load versions. Error: ".concat((null===n.t0||void 0===n.t0?void 0:n.t0.message)||"unknown"));case 11:d(!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()}),[e]),{isLoading:l,vers:i,error:m}}(Object(o.useMemo)((function(){return t.map((function(e){return e.id}))}),[t]),e.ledger),r=n.isLoading,i=n.vers,a=n.error;return Array.isArray(t)&&0!==t.length?r?Object(E.jsx)(k,{children:"loading versions"}):a?Object(E.jsx)(J,{children:a}):Object(E.jsx)("table",{children:Object(E.jsx)("tbody",{children:t.map((function(e){return Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:Object(E.jsx)("label",{style:{cursor:"pointer"},htmlFor:"add-test-field-component-".concat(e.id),children:e.name})}),Object(E.jsx)("td",{children:Array.isArray(i[e.id])?Object(E.jsx)(A.b,{id:"add-test-field-component-".concat(e.id),name:"component-".concat(e.id),component:Y(),options:i[e.id].map((function(e){return{value:e,label:e}}))}):"no versions"})]},e.id)}))})}):Object(E.jsx)(k,{children:"...select setup first"})}var K=function(e){var t=function(e,t){var n=Object(o.useState)({}),r=Object(u.a)(n,2),i=r[0],a=r[1],s=Object(o.useState)(!0),c=Object(u.a)(s,2),l=c[0],d=c[1],h=Object(o.useState)(""),b=Object(u.a)(h,2),m=b[0],j=b[1];return Object(o.useEffect)((function(){Object(p.a)(f.a.mark((function n(){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!0),n.prev=1,n.next=4,t.getComponentsVersions(e);case 4:r=n.sent,a(r),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),j("Failed to load versions. Error: ".concat((null===n.t0||void 0===n.t0?void 0:n.t0.message)||"unknown"));case 11:d(!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()}),[e]),{isLoading:l,vers:i,error:m}}(e.componentIds,e.ledger),n=t.isLoading,r=t.vers,i=t.error,a=Object(A.e)().values;return Array.isArray(e.componentIds)&&0!==e.componentIds.length?n?Object(E.jsx)(k,{children:"loading versions"}):i?Object(E.jsx)(J,{children:i}):Object(E.jsx)("table",{style:{borderSpacing:"4px",borderCollapse:"separate"},children:Object(E.jsx)("tbody",{children:e.componentIds.map((function(t){return Object(E.jsxs)("tr",{children:[Object(E.jsxs)("td",{children:[Object(E.jsx)("label",{htmlFor:"custom-version-".concat(t),className:"mr-2",children:"Custom"}),Object(E.jsx)(A.b,{id:"custom-version-".concat(t),name:"isCustomVersion.".concat(t),type:"checkbox"})]}),Object(E.jsx)("td",{children:Object(E.jsx)("label",{style:{cursor:"pointer"},htmlFor:"".concat(e.fieldNamePrefix,"-").concat(t),children:t})}),Object(E.jsx)("td",{className:"min-w-[220px]",children:Array.isArray(r[t])?Object(E.jsx)(A.b,{className:"w-full h-[38px]",id:"".concat(e.fieldNamePrefix,"-").concat(t),name:"".concat(e.fieldNamePrefix,".").concat(t),component:(null===a||void 0===a?void 0:a.isCustomVersion)&&(null===a||void 0===a?void 0:a.isCustomVersion[t])?"input":Y(),options:r[t].map((function(e){return{value:e,label:e}}))}):"no versions"})]},t)}))})}):Object(E.jsx)(k,{children:"...select setup first"})},Z=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/Drill4J/e2e/main/setups.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error(t.statusText);case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.github.com/repos/Drill4J/e2e/branches");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error(t.statusText);case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne({event_type:"run_test_for_component",client_payload:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne({event_type:"run_setup",client_payload:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne({event_type:"run_all_setups",client_payload:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ne(e){return fetch("https://api.github.com/repos/Drill4J/e2e/dispatches",{method:"POST",body:JSON.stringify(e),headers:{Authorization:"Bearer ".concat(w.getAuthToken())}})}var re={startAllSetups:te,startSetup:ee,startSetupsForComponent:$,getSetups:Z,getBranches:Q},oe=function(e){var t=e.data,n=t.components,r=t.setups,i=Object(o.useState)(r),a=Object(u.a)(i,2),s=a[0],c=a[1],l=Object(o.useState)([]),d=Object(u.a)(l,2),h=d[0],b=d[1],m=S().data;return Object(E.jsx)(A.d,{initialValues:{componentId:"",componentsVersions:{}},onSubmit:function(){var e=Object(p.a)(f.a.mark((function e(t,n){var r,o,i,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.componentId,o=t.componentsVersions,e.prev=1,i=U("componentId","tag")(o),e.next=5,re.startSetupsForComponent({componentId:r,versions:i,initiator:{userName:m.login,reason:"Manual start tests for component"}});case 5:(a=e.sent).ok?alert("Setups started successfully"):alert("Failed to start test: ".concat(a.status)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Action failed: "+(null===e.t0||void 0===e.t0?void 0:e.t0.message)||!1);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(t){var o=t.isSubmitting,i=t.values;return Object(E.jsxs)(A.c,{children:[Object(E.jsx)("label",{htmlFor:"start-setups-for-component-id",children:"Component"}),Object(E.jsx)(A.b,{id:"start-setups-for-component-id",name:"componentId",component:Y(function(){var t=Object(p.a)(f.a.mark((function t(n,o){var i,a,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=r.filter((function(e){return e.componentIds.includes(n)})),a=F(i),s=e.ledger.getComponentsLatestVersions(a),o.setFieldValue("componentsVersions",D("componentId","tag")(s)),c(i),b(a);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),options:n.map((function(e){return{value:e.id,label:e.name}}))}),Object(E.jsx)(A.a,{name:"componentId",component:"div"}),i.componentId&&Object(E.jsxs)("ul",{children:["Running setups:",s.map((function(e){var t=e.id;return Object(E.jsx)("li",{children:t})}))]}),Object(E.jsx)("label",{htmlFor:"add-test-field-status",children:"Component Versions"}),Object(E.jsx)(K,{componentIds:h,ledger:e.ledger,fieldNamePrefix:"componentsVersions"}),Object(E.jsx)("button",{type:"submit",disabled:o,children:"Submit"}),o&&Object(E.jsx)("div",{children:"submitting..."})]})}})},ie=function(e){var t=function(){var e=Object(o.useState)({}),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.getSetups();case 3:t=e.sent,r(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Failed fetch setups from e2e repo: "+(null===e.t0||void 0===e.t0?void 0:e.t0.message)||!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),n}(),n=Object(o.useState)([]),r=Object(u.a)(n,2),i=r[0],a=r[1];Object(o.useEffect)((function(){Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.getBranches();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Failed fetch branches from e2e repo: "+(null===e.t0||void 0===e.t0?void 0:e.t0.message)||!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);var s=Object(o.useState)([]),c=Object(u.a)(s,2),l=c[0],d=c[1],h=S().data;return Object(E.jsx)(A.d,{initialValues:{setupId:"",isCustomParams:!1,componentsVersions:{},params:"",repeatsCount:1,ref:"main",isCommitHash:!1},onSubmit:function(){var e=Object(p.a)(f.a.mark((function e(n){var r,o,i,a,s,c,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setupId,o=n.componentsVersions,i=n.params,a=n.repeatsCount,s=n.ref,c=0,e.prev=2,u=1;case 4:if(!(u<=a)){e.next=12;break}return e.next=7,re.startSetup({versions:U("componentId","tag")(o),params:JSON.parse(i),setupId:r,cypressEnv:t[r].cypressEnv,specFile:t[r].file,initiator:{userName:h.login,reason:"Manual start setup with parameter"},ref:s});case 7:e.sent.ok&&(c+=1);case 9:u++,e.next=4;break;case 12:alert("Successfully started ".concat(c," of ").concat(a," setups")),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),alert("Action failed: "+(null===e.t0||void 0===e.t0?void 0:e.t0.message)||!1);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),children:function(n){var r=n.isSubmitting,o=n.values;return Object(E.jsxs)(A.c,{children:[Object(E.jsx)("label",{htmlFor:"start-setup-setup-id",children:"Setup"}),Object(E.jsx)(A.b,{id:"start-setup-setup-id",name:"setupId",component:Y(function(){var t=Object(p.a)(f.a.mark((function t(n,r){var o,i,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=(null===(o=e.ledger.getSetupById(n))||void 0===o?void 0:o.componentIds)||[],a=e.ledger.getComponentsLatestVersions(i),r.resetForm({values:{componentsVersions:D("componentId","tag")(a),setupId:n}}),d(i);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),options:Object.entries(t).map((function(e){var t=Object(u.a)(e,1)[0];return{value:t,label:t}}))}),o.setupId&&Object(E.jsx)(ae,{values:o,autotestsSetups:t}),Object(E.jsx)("label",{htmlFor:"add-test-field-status",children:"Component Versions"}),Object(E.jsx)(K,{componentIds:l,ledger:e.ledger,fieldNamePrefix:"componentsVersions"}),Object(E.jsx)("label",{htmlFor:"repeatsCount",children:"Repeats count"}),Object(E.jsx)(A.b,{id:"repeatsCount",name:"repeatsCount",placeholder:"Repeats count",type:"number",min:1}),Object(E.jsxs)("div",{className:"flex gap-x-4",children:[Object(E.jsxs)("div",{children:[Object(E.jsx)("label",{htmlFor:"isCommitHash",className:"mr-2",children:"Enter the commit hash"}),Object(E.jsx)(A.b,{id:"isCommitHash",name:"isCommitHash",type:"checkbox"})]}),Object(E.jsxs)("div",{className:"grow",children:[Object(E.jsx)("label",{htmlFor:"ref",children:"Branch or commit hash"}),Object(E.jsx)(A.b,{className:"w-full h-[38px]",id:"ref",name:"ref",placeholder:"Select branch or type commit hash",component:(null===o||void 0===o?void 0:o.isCommitHash)?"input":Y(),options:i.map((function(e){var t=e.name;return{value:t,label:t}}))})]})]}),Object(E.jsx)("button",{type:"submit",disabled:r,children:"Submit"}),r&&Object(E.jsx)("div",{children:"submitting..."})]})}})};function ae(e){var t=e.values,n=e.autotestsSetups,r=Object(o.useMemo)((function(){return n[t.setupId].params.map((function(e){var t=JSON.stringify(e,void 0,2);return{value:t,label:t}}))}),[n,t.setupId]);return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(E.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[Object(E.jsx)("label",{htmlFor:"custom-params-checkbox",children:"Custom params"}),Object(E.jsx)(A.b,{id:"custom-params-checkbox",name:"isCustomParams",type:"checkbox"})]}),Object(E.jsx)("label",{htmlFor:"params",children:"Params"}),t.isCustomParams?Object(E.jsx)(A.b,{id:"params",name:"params",as:"textarea"}):Object(E.jsx)(A.b,{id:"start-setups-params",name:"params",component:Y(),options:r})]})})}var se,ce,ue,le=function(e){var t=e.data.setups,n=Object(o.useMemo)((function(){return F(t)}),[t]),r=Object(o.useMemo)((function(){return e.ledger.getComponentsLatestVersions(n).reduce((function(e,t){var n=t.componentId,r=t.tag;return Object(R.a)(Object(R.a)({},e),{},Object(N.a)({},n,r))}),{})}),[n]),i=S().data;return Object(E.jsx)(A.d,{initialValues:{componentsVersions:r},onSubmit:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.componentsVersions,e.prev=1,e.next=4,re.startAllSetups({versions:U("componentId","tag")(n),initiator:{userName:i.login,reason:"Manual start all setups"}});case 4:(r=e.sent).ok?alert("Tests started successfully"):alert("Failed to start tests: ".concat(r.status)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Action failed: "+(null===e.t0||void 0===e.t0?void 0:e.t0.message)||!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),children:function(t){var r=t.isSubmitting;return Object(E.jsxs)(A.c,{children:[Object(E.jsx)("label",{htmlFor:"add-test-field-status",children:"Component Versions"}),Object(E.jsx)(K,{componentIds:n,ledger:e.ledger,fieldNamePrefix:"componentsVersions"}),Object(E.jsx)("button",{type:"submit",disabled:r,children:"Submit"}),r&&Object(E.jsx)("div",{children:"submitting..."})]})}})},de=n(17),fe=n(22),pe=n.n(fe),he=n(36),be=n.n(he),me="rgb(204, 204, 204)",je="rgb(45, 45, 45)",ve="rgb(30, 30, 30)",ge="rgb(59 75 86)",Oe="rgb(14 99 156)",xe="rgb(226,180,128)",we="7px",ye="15px";function Ee(e){var t=e.start,n=void 0===t?Date.now():t,r=e.updateFrequency,i=function(e){var t=e.start,n=e.updateFrequency,r=pe()(t),i=Object(o.useState)(r.fromNow()),a=Object(u.a)(i,2),s=a[0],c=a[1];return Object(o.useEffect)((function(){setInterval((function(){c(r.fromNow())}),n)}),[n]),s}({start:n,updateFrequency:void 0===r?1e4:r});return Object(E.jsx)("span",{style:{color:xe},children:i})}pe.a.extend(be.a);var ke,Se,_e,Ce,Ae,Te={Td:l.a.td(se||(se=Object(c.a)(["\n    background-color: ",";\n    border: 1px solid ",";\n    color: ",";\n    padding: "," ",";\n    vertical-align: top;\n    :empty {\n      background-color: rgba(45, 45, 45, 0.8);\n    }\n  "])),je,ve,me,we,ye),Th:l.a.th(ce||(ce=Object(c.a)(["\n    background-color: ",";\n    border: 1px solid ",";\n    color: ",";\n    padding: "," ",";\n  "])),je,ve,me,we,ye),Tr:l.a.tr(ue||(ue=Object(c.a)(["\n    :hover {\n      outline: 4px solid ",";\n    }\n  "])),ge)},Pe={Wrapper:l.a.div(ke||(ke=Object(c.a)(["\n    > button {\n      background: none;\n      :hover {\n        background-color: ",";\n      }\n    }\n    input,\n    select {\n      color: ",";\n      background: none;\n      outline: none;\n      border: none;\n      border-bottom: 1px solid ",";\n    }\n    input {\n      width: 50px;\n    }\n    select {\n      padding-bottom: 2px;\n    }\n    option {\n      color: black;\n    }\n  "])),je,me,me)};function Ie(e){var t=e.tableInstance,n=t.gotoPage,r=t.canPreviousPage,o=t.previousPage,i=t.nextPage,a=t.canNextPage,s=t.pageCount,c=t.pageOptions,u=t.setPageSize,l=t.state,d=l.pageSize,f=l.pageIndex;return 0===c.length||1===c.length?Object(E.jsx)(E.Fragment,{}):Object(E.jsxs)(Pe.Wrapper,{style:{alignItems:"center"},children:[Object(E.jsx)("button",{onClick:function(){return n(0)},disabled:!r,children:"<<"})," ",Object(E.jsx)("button",{onClick:function(){return o()},disabled:!r,children:"<"})," ",Object(E.jsx)("button",{onClick:function(){return i()},disabled:!a,children:">"})," ",Object(E.jsx)("button",{onClick:function(){return n(s-1)},disabled:!a,children:">>"})," ",Object(E.jsxs)("span",{children:["Page"," ",Object(E.jsxs)("strong",{children:[f+1," of ",c.length]})," "]}),Object(E.jsxs)("span",{children:["| Go to page:"," ",Object(E.jsx)("input",{type:"number",defaultValue:f+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;n(t)}})]})," ",Object(E.jsx)("select",{value:d,onChange:function(e){u(Number(e.target.value))},children:[5,10,20,30,40,50].map((function(e){return Object(E.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})}function Re(e){return function(t,n){return t[e]>n[e]?-1:t[e]<n[e]?1:0}}var Ne={wrapper:l.a.div(Se||(Se=Object(c.a)([""]))),button:l.a.div(_e||(_e=Object(c.a)(["\n    color: ",";\n    text-decoration: underline;\n    cursor: pointer;\n    :hover {\n      color: ",";\n    }\n  "])),me,Oe),inner:l.a.div(Ce||(Ce=Object(c.a)(["\n    transform: ",";\n  "])),(function(e){return e.isExpanded?"translateY(0%)":"translateY(-100%)"})),children:l.a.div(Ae||(Ae=Object(c.a)([""])))};function Le(e){var t=e.initialRender,n=void 0!==t&&t,r=e.label,i=e.children,a=Object(o.useState)(n),s=Object(u.a)(a,2),c=s[0],l=s[1];return Object(E.jsxs)(Ne.wrapper,{title:"click to expand",children:[Object(E.jsx)(Ne.button,{onClick:function(){return l(!c)},children:r}),c&&Object(E.jsx)(Ne.children,{children:i})]})}function Be(e){var t=e.comment;return Object(E.jsx)("div",{className:"flex gap-x-3",children:(null===t||void 0===t?void 0:t.userName)&&(null===t||void 0===t?void 0:t.message)&&Object(E.jsx)(Le,{label:null===t||void 0===t?void 0:t.userName,children:Object(E.jsx)("div",{className:"max-w-[250px] whitespace-pre-wrap",children:null===t||void 0===t?void 0:t.message})})})}function Ue(e){var t=Object(o.useRef)(null);return Object(o.useEffect)((function(){function n(n){t&&t.current&&t.current.contains(n.target)||e()}var r=function(t){27===t.keyCode&&e()};return document.addEventListener("mousedown",n),document.addEventListener("keydown",r),function(){document.removeEventListener("mousedown",n),document.removeEventListener("keydown",r)}}),[]),t}function De(e){var t=e.comment,n=e.addComment,r=(t||{}).message,i=void 0===r?"":r,a=Object(o.useState)(!1),s=Object(u.a)(a,2),c=s[0],l=s[1],d=Ue((function(){return l(!1)}));return Object(E.jsxs)("div",{className:"relative",children:[Object(E.jsx)("div",{className:"fill-current link",onClick:function(){return l(!0)},title:(null===t||void 0===t?void 0:t.message)?"Edit":"Add",children:Object(E.jsx)(ze,{})}),c&&Object(E.jsx)(A.d,{initialValues:{message:i},onSubmit:function(){var e=Object(p.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.message,e.prev=1,e.next=4,n(r);case 4:window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert("Action failed: "+(null===e.t0||void 0===e.t0?void 0:e.t0.message)||!1);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),children:Object(E.jsx)("div",{className:"absolute z-10 bg-shade3 -left-[250px]",ref:d,children:Object(E.jsxs)(A.c,{className:"flex flex-col w-[250px]",children:[Object(E.jsx)(A.b,{id:"message",name:"message",as:"textarea",autoFocus:!0}),Object(E.jsx)("button",{type:"submit",children:"Submit"})]})})})]})}var Fe,Ve,Me,He,Ye,Ge,ze=function(){return Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(E.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Object(E.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})},Je={Table:l.a.table(Fe||(Fe=Object(c.a)(["\n    white-space: nowrap;\n  "]))),ScrollXWrapper:l.a.div(Ve||(Ve=Object(c.a)(["\n    overflow-x: auto;\n  "])))};function qe(e){var t=e.components,n=e.versions,r=e.ledger,o=e.comments,a=S().data,s=i.a.useMemo((function(){return n.sort(Re("date")).map((function(e){return Object(N.a)({release:e.date},e.componentId,e.tag)}))}),[]),c=i.a.useMemo((function(){return[{Header:"Release date",Latest:"latests:",accessor:"release",Cell:function(e){return Object(E.jsx)(Ee,{start:e.row.values.release})}}].concat(Object(I.a)(t.map((function(t){var n;return{Header:t.name,Latest:(null===(n=e.ledger.getLatestVersion(t.id))||void 0===n?void 0:n.tag)||"-",accessor:t.id}}))),[{Header:"Comments",Latest:"",accessor:"comments",Cell:function(e){return Object(E.jsx)(Be,{comment:o[e.row.values.release]})}},{Header:"",Latest:"",accessor:"add-comment",Cell:function(e){return Object(E.jsx)(De,{addComment:function(t){return r.addComment({releaseComponentDate:e.row.values.release,message:t,userName:null===a||void 0===a?void 0:a.login})},comment:o[e.row.values.release]})}}])}),[a]),u=Object(de.useTable)({columns:c,data:s,initialState:{pageSize:10}},de.usePagination),l=u.getTableProps,d=u.getTableBodyProps,f=u.headerGroups,p=u.prepareRow,h=u.page;return 0===t.length?Object(E.jsx)("div",{children:"no components"}):0===n.length?Object(E.jsx)("div",{children:"no versions"}):Object(E.jsxs)("div",{children:[Object(E.jsx)(Je.ScrollXWrapper,{children:Object(E.jsxs)(Je.Table,Object(R.a)(Object(R.a)({},l()),{},{children:[Object(E.jsx)("thead",{children:f.map((function(e,t){return Object(E.jsxs)(i.a.Fragment,{children:[Object(E.jsx)(Te.Tr,Object(R.a)(Object(R.a)({},Object(R.a)(Object(R.a)({},e.getHeaderGroupProps()),{},{key:"headerGroup_0_".concat(t)})),{},{children:e.headers.map((function(e){return Object(E.jsx)(Te.Td,Object(R.a)(Object(R.a)({},e.getHeaderProps()),{},{children:Object(E.jsx)("div",{children:e.Latest&&e.render("Latest")})}))}))})),Object(E.jsx)(Te.Tr,Object(R.a)(Object(R.a)({},Object(R.a)(Object(R.a)({},e.getHeaderGroupProps()),{},{key:"headerGroup_1_".concat(t)})),{},{children:e.headers.map((function(e){return Object(E.jsx)(Te.Th,Object(R.a)(Object(R.a)({},e.getHeaderProps()),{},{children:Object(E.jsx)("div",{children:e.render("Header")})}))}))}))]},"headerGroup_0_".concat(t))}))}),Object(E.jsx)("tbody",Object(R.a)(Object(R.a)({},d()),{},{children:h.map((function(e){return p(e),Object(E.jsx)(Te.Tr,Object(R.a)(Object(R.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(E.jsx)(Te.Td,Object(R.a)(Object(R.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))}),Object(E.jsx)(Ie,{tableInstance:u})]})}var We={table:l.a.tbody(Me||(Me=Object(c.a)(["\n    border: 1px solid ",";\n    background-color: ",";\n  "])),je,ve),tr:l.a.tr(He||(He=Object(c.a)(["\n    :hover {\n      outline: 4px solid ",";\n    }\n  "])),ge),td:l.a.td(Ye||(Ye=Object(c.a)(["\n    padding: ",";\n  "])),we),valueWrapper:l.a.span(Ge||(Ge=Object(c.a)(["\n    color: ",";\n  "])),xe)};function Xe(e){var t=e.data;return t?Object(E.jsx)(We.table,{children:Object.entries(t).map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(E.jsxs)(We.tr,{children:[Object(E.jsx)(We.td,{children:n}),Object(E.jsx)(We.td,{children:Object(E.jsx)(We.valueWrapper,{children:r})})]},"".concat(n,":").concat(r))}))}):Object(E.jsx)("span",{children:"No data"})}function Ke(e){var t=e.setupId,n=e.ledger,r=e.column.setFilter,i=Object(o.useState)(!1),a=Object(u.a)(i,2),s=a[0],c=a[1],l=(null===n||void 0===n?void 0:n.getSetupComponents(t))||[],d=Ue((function(){return c(!1)}));return Object(E.jsx)(A.d,{initialValues:{componentsVersions:{}},onSubmit:function(e){var t=Object.entries(e.componentsVersions).map((function(e){var t=Object(u.a)(e,2);return{componentId:t[0],tag:t[1]}}));r(t),c(!1)},children:Object(E.jsxs)(A.c,{children:[Object(E.jsx)("div",{className:"fill-current link",onClick:function(){return c(!0)},children:Object(E.jsx)($e,{})}),s&&Object(E.jsxs)("div",{className:"absolute bg-shade3 p-2",ref:d,children:[Object(E.jsx)(K,{componentIds:l.map((function(e){return e.id})),ledger:n,fieldNamePrefix:"componentsVersions"}),Object(E.jsx)("button",{type:"submit",children:"Submit"})]})]})})}var Ze,Qe,$e=function(){return Object(E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 15",fill:"none",children:Object(E.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 7C9 6.71467 9.12189 6.44292 9.33498 6.25317L14.987 1.03006L14.9911 1H1.01131L1.01491 1.02388L6.66503 6.25319C6.87812 6.44294 7 6.71467 7 7L7 12.5625L9 13.9922V7ZM16 1C16 0.447715 15.5523 0 15 0H0.930237C0.416481 0 0 0.416481 0 0.930237C0 0.97668 0.00347815 1.02306 0.0104053 1.06898L0.0261002 1.17303C0.0609311 1.40395 0.175479 1.61539 0.34988 1.7707L6 7V12.5625C6 12.8414 6.11649 13.1076 6.32135 13.2969L8.32135 14.7266C8.9618 15.3184 10 14.8642 10 13.9922V7L15.652 1.77689C15.8307 1.61783 15.9464 1.40001 15.9782 1.16295L16 1Z",fill:"#A4ACB3"})})},et={Table:l.a.table(Ze||(Ze=Object(c.a)(["\n    white-space: nowrap;\n    min-width: 100%;\n  "])))};function tt(e){var t=e.tests,n=e.setup,r=e.ledger,o=e.comments,a=(void 0===o?{}:o)[n.id]||{},s=i.a.useMemo((function(){return t.sort(Re("date"))}),[t,t.length]),c=S().data,u=i.a.useMemo((function(){return[{Header:"Date",accessor:"date",Cell:function(e){return Object(E.jsx)(Ee,{start:e.row.values.date})}},{Header:"Status",accessor:"status"},{Header:"Reason",accessor:"initiator",Cell:function(e){var t,n,r=null===(t=e.value)||void 0===t?void 0:t.userName,o=null===(n=e.value)||void 0===n?void 0:n.reason;return Object(E.jsxs)("span",{children:[r,": ",o]})}},{Header:"Versions",accessor:"componentVersionMap",filter:nt,filterable:!0,Cell:function(e){return Object(E.jsx)(Le,{label:"versions",children:Object(E.jsx)(Xe,{data:e.row.values.componentVersionMap})})}},{Header:"Autotests params",accessor:"testParams",Cell:function(e){return Object(E.jsx)(Le,{label:"Params",children:Object(E.jsx)(Xe,{data:e.value})})}},{Header:"Run",accessor:"linkToRun",Cell:function(e){return Object(E.jsx)("a",{href:e.value,target:"_blank",rel:"noreferrer",children:"Run details"})}},{Header:"Description",accessor:"description"},{Header:"Comments",Latest:"",accessor:"testComments",Cell:function(e){return Object(E.jsx)(Be,{comment:a[e.row.values.date]})}},{Header:"",Latest:"",accessor:"add-comment",Cell:function(e){return Object(E.jsx)(De,{addComment:function(t){return r.addTestComment({publishResultsDate:e.row.values.date,message:t,userName:null===c||void 0===c?void 0:c.login,setupId:n.id})},comment:a[e.row.values.date]})}}]}),[c,n.id]),l=i.a.useMemo((function(){return{Filter:function(e){return Object(E.jsx)(Ke,Object(R.a)({setupId:n.id,ledger:r},e))}}}),[]),d=Object(de.useTable)({columns:u,data:s,initialState:{pageSize:5},defaultColumn:l},de.useFilters,de.usePagination),f=d.getTableProps,p=d.getTableBodyProps,h=d.headerGroups,b=d.rows,m=d.prepareRow,j=d.page;return Object(E.jsxs)("div",{children:[Object(E.jsxs)(et.Table,Object(R.a)(Object(R.a)({},f()),{},{children:[Object(E.jsx)("thead",{children:h.map((function(e){return Object(E.jsx)(Te.Tr,Object(R.a)(Object(R.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(E.jsx)(Te.Th,Object(R.a)(Object(R.a)({},e.getHeaderProps()),{},{children:Object(E.jsxs)("div",{className:"flex gap-x-2",children:[e.render("Header"),e.filterable?e.render("Filter"):null]})}))}))}))}))}),Object(E.jsxs)("tbody",Object(R.a)(Object(R.a)({},p()),{},{children:[b.length<=0&&Object(E.jsx)(Te.Tr,{children:Object(E.jsx)(Te.Td,{colSpan:u.length,children:"No data on setup tests"})}),b.length>0&&j.map((function(e){return m(e),Object(E.jsx)(Te.Tr,Object(R.a)(Object(R.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(E.jsx)(Te.Td,Object(R.a)(Object(R.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))]}))]})),Object(E.jsx)(Ie,{tableInstance:d})]})}function nt(e,t,n){return e.filter((function(e){var t,r=(null===(t=e.values)||void 0===t?void 0:t.componentVersionMap)||{};return n.every((function(e){var t=e.componentId,n=e.tag;return r[t]===n}))}))}var rt=l.a.div(Qe||(Qe=Object(c.a)(["\n  font-size: 12px;\n  background-color: black;\n"])));function ot(e){var t=e.data;return Object(E.jsxs)(rt,{className:"row",children:[Object(E.jsxs)("div",{className:"col-3",children:[Object(E.jsx)("div",{children:"Components"}),Object(E.jsx)(it,{label:"Components",data:t.components})]}),Object(E.jsxs)("div",{className:"col-3",children:[Object(E.jsx)("div",{children:"Setups"}),Object(E.jsx)(it,{label:"Setups",data:t.setups})]}),Object(E.jsxs)("div",{className:"col-3",children:[Object(E.jsx)("div",{children:"Versions"}),Object(E.jsx)(it,{label:"Versions",data:t.versions,keyProp:"date"})]}),Object(E.jsxs)("div",{className:"col-3",children:[Object(E.jsx)("div",{children:"Tests"}),Object(E.jsx)(it,{label:"Tests",data:t.tests,keyProp:"date"})]})]})}function it(e){var t=e.data,n=e.keyProp,r=void 0===n?"id":n;return Array.isArray(t)?Object(E.jsx)("div",{children:t.map((function(e){return function(e,t){return Object(E.jsxs)("div",{className:"mb-2",children:[JSON.stringify(t),","]},e)}(e[r],e)}))}):Object(E.jsx)(E.Fragment,{children:"..."})}pe.a.extend(be.a);var at;function st(){var e=function(){var e=Object(o.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(null),a=Object(u.a)(i,2),s=a[0],c=a[1];return Object(o.useEffect)((function(){var e,t;return Object(p.a)(f.a.mark((function o(){var i,a;return f.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,w.getLedgerInstance();case 3:if(i=o.sent){o.next=6;break}return o.abrupt("return");case 6:a=function(){null===n&&r(Date.now())},e=setInterval((function(){return i.checkChanges(a)}),3e4),t=setInterval((function(){null!==n&&c(pe()(n).fromNow())}),3e4),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(0),console.error(o.t0);case 14:case"end":return o.stop()}}),o,null,[[0,11]])})))(),function(){e&&clearInterval(e),t&&clearInterval(t)}}),[n]),s}();return null===e?null:Object(E.jsxs)("div",{children:[Object(E.jsxs)("span",{children:["Detected changes",e]}),Object(E.jsx)("span",{children:"Hard refresh (CTRL+F5) to view changes "})]})}function ct(){var e=y(),t=e.isLoading,n=e.data,r=e.ledger;return t||!r?Object(E.jsx)(k,{children:"Loading ledger data..."}):n?Object(E.jsxs)("div",{className:"px-2 pb-4",children:[Object(E.jsxs)("div",{children:["Refreshed ",Object(E.jsx)(Ee,{}),Object(E.jsx)(st,{})]}),Object(E.jsx)(lt,{children:Object(E.jsx)(Le,{label:"Debug Data",children:Object(E.jsx)(ot,{data:n})})}),Object(E.jsx)("h3",{className:"mt-3",children:"VERSIONS"}),Object(E.jsx)(qe,{versions:n.versions,components:n.components,ledger:r,comments:n.comments}),Object(E.jsx)("h3",{className:"mt-3",children:"SETUPS"}),Object(E.jsx)("div",{className:"row",children:n.setups.map((function(e){var t=r.getSetupTests(e.id);return Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("h5",{children:e.name}),Object(E.jsx)(tt,{setup:e,tests:t,ledger:r,comments:n.testComments})]},e.id)}))})]}):Object(E.jsx)(k,{children:"ledger.json is not initialized. Make sure to follow setup instructions or contact dev team"})}function ut(e){var t=e.modals,n=e.label,r=Object(o.useState)(null),i=Object(u.a)(r,2),a=i[0],s=i[1],c=y(),l=c.data,d=c.ledger;return l&&d?Object(E.jsxs)("div",{className:"flex gap-x-3 p-2",children:[n,":",t.map((function(e){var t=e.label;return Object(E.jsx)("span",{className:"link",onClick:function(){return s(t)},children:t},t)})),a&&Object(E.jsx)("div",{className:"absolute top-10 flex flex-col bg-shade3 p-3 min-w-[350px] w-8/12",children:t.map((function(e){var t=e.label,n=e.Form;return a===t&&Object(E.jsxs)("div",{children:[Object(E.jsx)(n,{ledger:d,data:l}),Object(E.jsx)("button",{className:"w-full",type:"button",onClick:function(){return s(null)},children:"Close"})]})}))})]}):null}var lt=l.a.div(at||(at=Object(c.a)(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  overflow-y: auto;\n  background-color: black;\n  max-height: 30vh;\n"]))),dt=function(){return Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"header",children:[Object(E.jsx)("div",{style:{marginRight:"15px"},children:w.isConnected()?Object(E.jsx)("button",{onClick:function(){return w.disconnect()},children:"GitHub Logout"}):Object(E.jsx)("button",{onClick:function(){return w.connect()},children:"Authenticate using GitHub"})}),Object(E.jsx)(_,{}),Object(E.jsx)(ut,{label:"Launch tests",modals:[{label:"For component",Form:oe},{label:"Setup",Form:ie},{label:"All",Form:le}]}),Object(E.jsx)(ut,{label:"Add",modals:[{label:"Component",Form:T},{label:"Setup",Form:M},{label:"Version",Form:z},{label:"Test result",Form:W}]})]}),Object(E.jsx)("div",{className:"main-ui",children:w.isConnected()?Object(E.jsx)(ct,{}):Object(E.jsx)(C,{authenticate:function(){return w.connect()}})})]})};s.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(dt,{})}),document.getElementById("root"))},61:function(e,t,n){var r,o=n(78),i=n(55),a=n(2),s=n(23),c=n(24);r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Ledger=void 0;var l=n(1),d=u(n(2)),f=n(3),p=function(){function e(t){s(this,e),this.ledgerFilePath="ledger.json",this.defaultData={components:[],versions:[],setups:[],tests:[],comments:{},testComments:{}};var n=t.octokitAuthToken,r=t.ledgerRepo;this.auth=n,this.ledgerRepo=r,this.connecting=this.connect()}return c(e,[{key:"connect",value:function(){return r(this,void 0,void 0,a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.octokit=new l.Octokit({auth:this.auth}),e.next=3,this.fetchData();case 3:t=e.sent,this.data=this.deserialize(t.content),this.validateDataObject(this.data),this.sha=t.sha;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"connected",value:function(){return r(this,void 0,void 0,a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.connecting);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getOctokitInstance",value:function(){return r(this,void 0,void 0,a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connecting;case 2:return e.abrupt("return",this.octokit);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"checkChanges",value:function(e){return r(this,void 0,void 0,a.mark((function t(){return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchData();case 2:t.sent.sha!==this.sha&&e();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"fetchData",value:function(){return r(this,void 0,void 0,a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkRateLimit();case 2:return e.next=4,this.octokit.request("GET /repos/".concat(this.ledgerRepo.owner,"/").concat(this.ledgerRepo.name,"/contents/").concat(this.ledgerFilePath));case 4:if(200===(t=e.sent).status){e.next=7;break}throw new Error("Failed to load ledger data: ".concat(t.data.error));case 7:return e.abrupt("return",t.data);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"checkRateLimit",value:function(){return r(this,void 0,void 0,a.mark((function e(){var t,n,r,o,i,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.octokit.request("GET /rate_limit");case 2:t=e.sent,n=t.data.rate,r=n.limit,o=n.remaining,i=n.reset,s=n.used,console.log("API REQUEST RATES\n      used ".concat(s,"/").concat(r," (").concat(o," left)\n      reset ").concat(i," (UTC +0?)\n      "));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"addTo",value:function(e,t){return r(this,void 0,void 0,a.mark((function n(){var r;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Object.assign(Object.assign({},this.data),o({},e,[].concat(i(this.data[e]),[t]))),n.next=3,this.updateLedgerData(e,r);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"updateLedgerData",value:function(e,t){return r(this,void 0,void 0,a.mark((function n(){var r;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.octokit.request("PUT /repos/".concat(this.ledgerRepo.owner,"/").concat(this.ledgerRepo.name,"/contents/").concat(this.ledgerFilePath),{message:"new ".concat(e),content:this.serialize(t),sha:this.sha});case 2:if(200===(r=n.sent).status){n.next=5;break}throw new Error("Failed to update ledger data: ".concat(r.data.error));case 5:this.data=t,this.sha=r.data.content.sha;case 7:case"end":return n.stop()}}),n,this)})))}},{key:"deserialize",value:function(e){return console.log("deserialize"),JSON.parse((0,f.b64_to_utf8)(e))}},{key:"serialize",value:function(e){return console.log("serialize"),(0,f.utf8_to_b64)(JSON.stringify(e))}},{key:"addComponent",value:function(e){return r(this,void 0,void 0,a.mark((function t(){return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,f.validateNonEmptyString)("id",e.id),(0,f.validateNonEmptyString)("name",e.name),!this.isComponentExists(e.id,e.name)){t.next=4;break}throw new Error("Component with the same id or name already exists");case 4:return t.next=6,this.addTo("components",{id:e.id.trim(),name:e.name.trim()});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"addSetup",value:function(e){return r(this,void 0,void 0,a.mark((function t(){var n,r,o,i=this;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,f.validateNonEmptyString)("id",e.id),(0,f.validateNonEmptyString)("name",e.name),Array.isArray(e.componentIds)&&0!==e.componentIds.length){t.next=4;break}throw new Error("Setup must include at least one component");case 4:if(!(this.data.setups.findIndex((function(t){return t.id===e.id||t.name===e.name}))>-1)){t.next=7;break}throw new Error("Setup with the same id or name already exists");case 7:if(r=(n=function(e){for(var t="",n=0;n<e.length;n++)t+=e[n];return t})(e.componentIds),-1===this.data.setups.map((function(e){return e.componentIds})).map(n).findIndex((function(e){return e===r}))){t.next=12;break}throw new Error("Setup with the same list of components already exist");case 12:if(!((o=e.componentIds.filter((function(e){return!i.isComponentExists(e)}))).length>0)){t.next=15;break}throw new Error("Components with the following ids do not exist:\n".concat(o.join("\n")));case 15:return t.next=17,this.addTo("setups",{id:e.id.trim(),name:e.name.trim(),componentIds:e.componentIds.sort()});case 17:case"end":return t.stop()}}),t,this)})))}},{key:"addVersion",value:function(e){return r(this,void 0,void 0,a.mark((function t(){var n,r,o,i,s;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.componentId,r=e.tag,(0,f.validateNonEmptyString)("componentId",n),(0,f.validateNonEmptyString)("tag",r),this.isComponentExists(n)){t.next=8;break}return o="Component with id ".concat(n," does not exist, but it will be added automatically. Later, you can edit it's parameters manually"),this.warning(o),t.next=8,this.addComponent({id:n,name:n});case 8:return(i=this.findVersion(n,r))&&(s="\n      Version ".concat(n,":").concat(r," already exists.\n      It was created at ").concat(new Date(i.date),"\n      Duplicate version will be added and take priority over the previous one.\n      But you will still able to see it in the version table.\n    "),this.warning(s)),t.next=12,this.addTo("versions",{date:Date.now(),componentId:n.trim(),tag:r.trim()});case 12:case"end":return t.stop()}}),t,this)})))}},{key:"addTest",value:function(e){var t;return r(this,void 0,void 0,a.mark((function n(){var r,o;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((0,f.validateNonEmptyString)("id",e.setupId),(0,f.validateNonEmptyString)("status",e.status),0!==Object.keys(e.componentVersionMap).length){n.next=4;break}throw new Error("Please specify a version for each of the components");case 4:if(e.initiator.userName){n.next=6;break}throw new Error("user is not logged in");case 6:return(r=this.getSetupById(e.setupId))?this.validateSetupComponentsList(e,r.componentIds):(o="Setup with id ".concat(e.setupId," doesn't exists.\n      Test result will be saved, but will only be visible in raw tests data table.\n      Make sure to add ").concat(e.setupId," to setups list."),this.warning(o),this.validateSetupComponentsList(e)),n.next=10,this.addTo("tests",Object.assign(Object.assign({},e),{date:Date.now(),status:e.status.trim(),description:null===(t=e.description)||void 0===t?void 0:t.trim()}));case 10:case"end":return n.stop()}}),n,this)})))}},{key:"addComment",value:function(e){var t=e.message,n=e.releaseComponentDate,i=e.userName;return r(this,void 0,void 0,a.mark((function e(){var r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("Please leave the message for published version");case 2:return(0,f.validateNonEmptyString)("message",t),(0,f.validateNonEmptyString)("userName",i),r=Object.assign(Object.assign({},this.data),{comments:Object.assign(Object.assign({},this.data.comments),o({},n,{message:t,userName:i,releaseComponentDate:n}))}),e.abrupt("return",this.updateLedgerData("comments",r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"addTestComment",value:function(e){var t,n,i=e.setupId,s=e.message,c=e.publishResultsDate,u=e.userName;return r(this,void 0,void 0,a.mark((function e(){var r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}throw new Error("Please leave the message for published version");case 2:return(0,f.validateNonEmptyString)("message",s),(0,f.validateNonEmptyString)("userName",u),r=Object.assign(Object.assign({},this.data),{testComments:Object.assign(Object.assign({},null===(t=this.data)||void 0===t?void 0:t.testComments),o({},i,Object.assign(Object.assign({},null===(n=this.data)||void 0===n?void 0:n.testComments[i]),o({},c,{message:s,userName:u,publishResultsDate:c}))))}),e.abrupt("return",this.updateLedgerData("testComments",r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"validateSetupComponentsList",value:function(e,t){var n=Object.keys(e.componentVersionMap);if(Array.isArray(t)&&t.length>0&&!t.every((function(e){return n.includes(e)})))throw new Error("Please specify a version for each of the components");var r="";for(var o in e.componentVersionMap){var i=e.componentVersionMap[o];this.findVersion(o,i)||(r="".concat(o,":").concat(i," does not exists!\n"))}r&&(r+="Test result will be saved, but make sure to add these versions",this.warning(r))}},{key:"getLatestVersion",value:function(e){return this.data.versions.filter((function(t){return t.componentId===e})).sort((function(e,t){return d.default.compare(t.tag,e.tag)}))[0]}},{key:"getLatestVersions",value:function(e){if(e){var t=this.data.setups.find((function(t){return e===t.id}));if(!t)throw new Error("CRITICAL ERROR: setup with ".concat(e," not found. Normally, this should not happen. Please contact the development team"));return t.componentIds.map(this.getLatestVersion)}return this.data.components.map((function(e){return e.id})).map(this.getLatestVersion)}},{key:"getSetupComponents",value:function(e){var t=this.getSetupById(e);if(!t)throw new Error('setup with id "'.concat(e,'" is not found'));var n=this.data.components.filter((function(e){return t.componentIds.includes(e.id)}));return 0===n.length&&this.warning("getSetupComponents(): setup ".concat(e," appears to have no components")),n}},{key:"getSetupById",value:function(e){return this.data.setups.find((function(t){return t.id===e}))}},{key:"getSetupTests",value:function(e){return this.data.tests.filter((function(t){return t.setupId===e}))}},{key:"findVersion",value:function(e,t){return this.data.versions.filter((function(t){return t.componentId===e})).find((function(e){return e.tag===t}))}},{key:"getComponentsVersions",value:function(e){var t=e.reduce((function(e,t){return e[t]=[],e}),{});return this.data.versions.filter((function(e){return t[e.componentId]})).sort((function(e,t){return d.default.compare(t.tag,e.tag)})).forEach((function(e){t[e.componentId].push(e.tag)})),t}},{key:"getComponentsLatestVersions",value:function(e){return e.map(this.getLatestVersion.bind(this))}},{key:"isComponentExists",value:function(e,t){return t?this.data.components.findIndex((function(n){return n.id===e&&n.name===t}))>-1:this.data.components.findIndex((function(t){return t.id===e}))>-1}},{key:"validateDataObject",value:function(e){var t=e;if(!(t&&Array.isArray(t.components)&&Array.isArray(t.versions)&&Array.isArray(t.setups)&&Array.isArray(t.tests)))throw new Error("Received malformed ledger data\n"+"".concat(this.ledgerRepo.url,"/").concat(this.ledgerFilePath)+"\nEnsure that JSON follows the schema:\n"+JSON.stringify(this.defaultData,void 0,2))}},{key:"warning",value:function(e){(0,f.platform)().isBrowser&&alert(e),!(0,f.platform)().isBrowser&&console.warn(e)}}]),e}();t.Ledger=p},function(e,t){e.exports=n(140)},function(e,t){e.exports=n(86)},function(e,t,n){"use strict";(function(e,n){function r(){return{isBrowser:"undefined"!==typeof window&&"undefined"!==typeof window.document,isNode:"undefined"!==typeof e&&null!=e.versions}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateNonEmptyString=t.b64_to_utf8=t.utf8_to_b64=t.platform=void 0,t.platform=r,t.utf8_to_b64=function(e){if(r().isBrowser)return window.btoa(unescape(encodeURIComponent(e)));if(r().isNode)return n.from(unescape(encodeURIComponent(e))).toString("base64");throw new Error("Unsupported platform")},t.b64_to_utf8=function(e){if(r().isBrowser)return decodeURIComponent(escape(window.atob(e)));if(r().isNode)return decodeURIComponent(escape(n.from(e,"base64").toString()));throw new Error("Unsupported platform")},t.validateNonEmptyString=function(e,t){if(!t||"string"!==typeof t)throw new Error("Expected ".concat(e,' to be a non-empty string, but got: "').concat(t,'"'))}}).call(this,n(4),n(5).Buffer)},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function b(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){var r=n(7),o=n(8),i=n(9);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t),e}(e,t,n,r):"string"===typeof t?function(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),o=(e=s(e,r)).write(t,n);return o!==r&&(e=e.slice(0,o)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?s(e,0):f(e,t);if("Buffer"===t.type&&i(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return M(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function j(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,o);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,o){var i,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var d=!0,f=0;f<c;f++)if(u(e,i+f)!==u(t,f)){d=!1;break}if(d)return i}return-1}function g(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function O(e,t,n,r){return H(V(t,e.length-n),e,n,r)}function x(e,t,n,r){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return x(e,t,n,r)}function y(e,t,n,r){return H(M(t),e,n,r)}function E(e,t,n,r){return H(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,c,u=e[o],l=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128===(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=e[o+1],a=e[o+2],128===(192&i)&&128===(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128===(192&i)&&128===(192&a)&&128===(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=d}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=_));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"===typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):b.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(r,o),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){i=u[d],a=l[d];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return j(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return j(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return y(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function T(e,t,n){var r,o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var i="",a=t;a<n;++a)i+=(r=e[a])<16?"0"+r.toString(16):r.toString(16);return i}function P(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function I(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function B(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||B(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,i){return i||B(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;n=new c(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);R(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);R(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=c.isBuffer(e)?e:V(new c(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function V(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function M(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function H(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(6))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,c=n-o;s<c;s+=a)i.push(l(e,s,s+a>c?c:s+a));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+e[t+d],d+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=u}return(p?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*b}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}])},e.exports=r()},75:function(e,t,n){},76:function(e,t,n){}},[[139,1,2]]]);
//# sourceMappingURL=main.f2e3e417.chunk.js.map